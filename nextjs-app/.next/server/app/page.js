(()=>{var a={};a.id=974,a.ids=[974],a.modules={85:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.a,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(5239),e=c(8088),f=c(7220),g=c(1289),h=c(6191),i=c(4823),j=c(1998),k=c(2603),l=c(4649),m=c(2781),n=c(2602),o=c(1268),p=c(4853),q=c(261),r=c(5052),s=c(9977),t=c(6713),u=c(3365),v=c(1454),w=c(7778),x=c(6143),y=c(9105),z=c(8171),A=c(6439),B=c(6133),C=c.n(B),D=c(893),E=c(2836),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,1204)),"/home/matt/prompt-wizard/nextjs-app/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,4431)),"/home/matt/prompt-wizard/nextjs-app/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,6133,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,849,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,9868,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,9615,23)),"next/dist/client/components/builtin/unauthorized.js"]}],H=["/home/matt/prompt-wizard/nextjs-app/src/app/page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",projectDir:""});async function K(a,b,c){var d;let B="/page";"/index"===B&&(B="/");let F="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await J.prepare(a,b,{srcPage:B,multiZoneDraftMode:F});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(B),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===J.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&J.isDev&&(az=_);let aA={...D,tree:G,pages:H,GlobalError:C(),handler:K,routeModule:J,__next_app__:I};W&&X&&(0,n.setReferenceManifestsSingleton)({page:B,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:J,page:B,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:J.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:F,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!J.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===J.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await J.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await J.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!J.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&E.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||b instanceof A.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:B,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},570:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,5227,23)),Promise.resolve().then(c.t.bind(c,6346,23)),Promise.resolve().then(c.t.bind(c,7924,23)),Promise.resolve().then(c.t.bind(c,99,23)),Promise.resolve().then(c.t.bind(c,8243,23)),Promise.resolve().then(c.t.bind(c,8827,23)),Promise.resolve().then(c.t.bind(c,2763,23)),Promise.resolve().then(c.t.bind(c,7173,23)),Promise.resolve().then(c.bind(c,5587))},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},1135:()=>{},1204:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(1369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/matt/prompt-wizard/nextjs-app/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/matt/prompt-wizard/nextjs-app/src/app/page.tsx","default")},2418:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,6133,23)),Promise.resolve().then(c.t.bind(c,6444,23)),Promise.resolve().then(c.t.bind(c,6042,23)),Promise.resolve().then(c.t.bind(c,9477,23)),Promise.resolve().then(c.t.bind(c,9345,23)),Promise.resolve().then(c.t.bind(c,2089,23)),Promise.resolve().then(c.t.bind(c,6577,23)),Promise.resolve().then(c.t.bind(c,1307,23)),Promise.resolve().then(c.t.bind(c,4817,23))},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:a=>{"use strict";a.exports=require("path")},4069:(a,b,c)=>{Promise.resolve().then(c.bind(c,1204))},4431:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>l,metadata:()=>k,viewport:()=>j});var d=c(7413),e=c(768),f=c.n(e),g=c(4993),h=c.n(g);c(1135);var i=c(7230);let j={width:"device-width",initialScale:1,maximumScale:1,themeColor:"#3b82f6"},k={title:"PromptEvolver - Advanced AI Prompt Optimization",description:"Transform your prompts with Microsoft PromptWizard methodology powered by Qwen3-4B. Get systematic improvements in clarity, specificity, and engagement through AI-driven optimization.",keywords:["AI prompt optimization","Microsoft PromptWizard","Qwen3","prompt engineering","AI assistant","prompt enhancement","machine learning","natural language processing"],authors:[{name:"PromptEvolver Team"}],creator:"PromptEvolver",publisher:"PromptEvolver",openGraph:{type:"website",locale:"en_US",title:"PromptEvolver - Advanced AI Prompt Optimization",description:"Transform your prompts with Microsoft PromptWizard methodology powered by Qwen3-4B",siteName:"PromptEvolver"},twitter:{card:"summary_large_image",title:"PromptEvolver - Advanced AI Prompt Optimization",description:"Transform your prompts with Microsoft PromptWizard methodology powered by Qwen3-4B"},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}}};function l({children:a}){return(0,d.jsxs)("html",{lang:"en",className:"scroll-smooth",children:[(0,d.jsxs)("head",{children:[(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"})]}),(0,d.jsx)("body",{className:`${f().variable} ${h().variable} antialiased font-sans text-gray-900 bg-gray-50`,children:(0,d.jsx)(i.ConvexClientProvider,{children:a})})]})}},4620:(a,b,c)=>{"use strict";c.d(b,{ConvexClientProvider:()=>h});var d=c(687),e=c(799);let f="https://resilient-guanaco-29.convex.cloud",g=f?new e.eH(f):null;function h({children:a}){return g?(0,d.jsx)(e.hD,{client:g,children:a}):(console.warn("NEXT_PUBLIC_CONVEX_URL is not set. Convex features will be unavailable."),(0,d.jsx)(d.Fragment,{children:a}))}},5418:(a,b,c)=>{Promise.resolve().then(c.bind(c,7230))},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},7221:(a,b,c)=>{Promise.resolve().then(c.bind(c,7838))},7230:(a,b,c)=>{"use strict";c.d(b,{ConvexClientProvider:()=>d});let d=(0,c(1369).registerClientReference)(function(){throw Error("Attempted to call ConvexClientProvider() from the server but ConvexClientProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/matt/prompt-wizard/nextjs-app/src/app/ConvexClientProvider.tsx","ConvexClientProvider")},7838:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>T});var d=c(687),e=c(3210),f=c(799),g=c(9471),h=c(4636),i=c(6390);function j(a,b){if("undefined"==typeof Convex||void 0===Convex.syscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");return JSON.parse(Convex.syscall(a,JSON.stringify(b)))}async function k(a,b){let c;if("undefined"==typeof Convex||void 0===Convex.asyncSyscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");try{c=await Convex.asyncSyscall(a,JSON.stringify(b))}catch(a){if(void 0!==a.data){let b=new h.i(a.message);throw b.data=(0,i.du)(a.data),b}throw Error(a.message)}return JSON.parse(c)}c(3991);var l=Object.defineProperty,m=(a,b,c)=>((a,b,c)=>b in a?l(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);class n{constructor(){m(this,"_isExpression"),m(this,"_value")}}var o=Object.defineProperty;class p extends n{constructor(a){super(),((a,b,c)=>((a,b,c)=>b in a?o(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c))(this,"inner"),this.inner=a}serialize(){return this.inner}}function q(a){return a instanceof p?a.serialize():{$literal:(0,i.cy)(a)}}let r={eq:(a,b)=>new p({$eq:[q(a),q(b)]}),neq:(a,b)=>new p({$neq:[q(a),q(b)]}),lt:(a,b)=>new p({$lt:[q(a),q(b)]}),lte:(a,b)=>new p({$lte:[q(a),q(b)]}),gt:(a,b)=>new p({$gt:[q(a),q(b)]}),gte:(a,b)=>new p({$gte:[q(a),q(b)]}),add:(a,b)=>new p({$add:[q(a),q(b)]}),sub:(a,b)=>new p({$sub:[q(a),q(b)]}),mul:(a,b)=>new p({$mul:[q(a),q(b)]}),div:(a,b)=>new p({$div:[q(a),q(b)]}),mod:(a,b)=>new p({$mod:[q(a),q(b)]}),neg:a=>new p({$neg:q(a)}),and:(...a)=>new p({$and:a.map(q)}),or:(...a)=>new p({$or:a.map(q)}),not:a=>new p({$not:q(a)}),field:a=>new p({$field:a})};function s(a,b,c,d){if(void 0===a)throw TypeError(`Must provide arg ${b} \`${d}\` to \`${c}\``)}var t=c(2975),u=Object.defineProperty,v=(a,b,c)=>((a,b,c)=>b in a?u(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);function w(a){throw Error("consumed"===a?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}Symbol.asyncIterator;class x{constructor(a){v(this,"state"),v(this,"tableNameForErrorMessages"),this.state={type:"preparing",query:a},"FullTableScan"===a.source.type?this.tableNameForErrorMessages=a.source.tableName:this.tableNameForErrorMessages=a.source.indexName.split(".")[0]}takeQuery(){if("preparing"!==this.state.type)throw Error("A query can only be chained once and can't be chained after iteration begins.");let a=this.state.query;return this.state={type:"closed"},a}startQuery(){if("executing"===this.state.type)throw Error("Iteration can only begin on a query once.");("closed"===this.state.type||"consumed"===this.state.type)&&w(this.state.type);let{queryId:a}=j("1.0/queryStream",{query:this.state.query,version:t.r});return this.state={type:"executing",queryId:a},a}closeQuery(){"executing"===this.state.type&&j("1.0/queryCleanup",{queryId:this.state.queryId}),this.state={type:"consumed"}}order(a){s(a,1,"order","order");let b=this.takeQuery();if("Search"===b.source.type)throw Error("Search queries must always be in relevance order. Can not set order manually.");if(null!==b.source.order)throw Error("Queries may only specify order at most once");return b.source.order=a,new x(b)}filter(a){s(a,1,"filter","predicate");let b=this.takeQuery();if(b.operators.length>=256)throw Error("Can't construct query with more than 256 operators");return b.operators.push({filter:q(a(r))}),new x(b)}limit(a){s(a,1,"limit","n");let b=this.takeQuery();return b.operators.push({limit:a}),new x(b)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){("closed"===this.state.type||"consumed"===this.state.type)&&w(this.state.type);let a="preparing"===this.state.type?this.startQuery():this.state.queryId,{value:b,done:c}=await k("1.0/queryStreamNext",{queryId:a});return c&&this.closeQuery(),{value:(0,g.du)(b),done:c}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(a){if(s(a,1,"paginate","options"),"number"!=typeof a?.numItems||a.numItems<0)throw Error(`\`options.numItems\` must be a positive number. Received \`${a?.numItems}\`.`);let b=this.takeQuery(),c=a.numItems,d=a.cursor,e=a?.endCursor??null,f=a.maximumRowsRead??null,{page:h,isDone:i,continueCursor:j,splitCursor:l,pageStatus:m}=await k("1.0/queryPage",{query:b,cursor:d,endCursor:e,pageSize:c,maximumRowsRead:f,maximumBytesRead:a.maximumBytesRead,version:t.r});return{page:h.map(a=>(0,g.du)(a)),isDone:i,continueCursor:j,splitCursor:l,pageStatus:m}}async collect(){let a=[];for await(let b of this)a.push(b);return a}async take(a){s(a,1,"take","n");if(!Number.isInteger(a)||a<0)throw TypeError("Arg 1 `n` to `take` must be a non-negative integer");return this.limit(a).collect()}async first(){let a=await this.take(1);return 0===a.length?null:a[0]}async unique(){let a=await this.take(2);if(0===a.length)return null;if(2===a.length)throw Error(`unique() query returned more than one result from table ${this.tableNameForErrorMessages}:
 [${a[0]._id}, ${a[1]._id}, ...]`);return a[0]}}var y=c(7954);y.v.object({numItems:y.v.number(),cursor:y.v.union(y.v.string(),y.v.null()),endCursor:y.v.optional(y.v.union(y.v.string(),y.v.null())),id:y.v.optional(y.v.number()),maximumRowsRead:y.v.optional(y.v.number()),maximumBytesRead:y.v.optional(y.v.number())});var z=c(1966),A=Object.defineProperty,B=Object.defineProperty,C=(a,b,c)=>((a,b,c)=>b in a?B(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);class D{constructor(a){C(this,"indexes"),C(this,"searchIndexes"),C(this,"vectorIndexes"),C(this,"validator"),this.indexes=[],this.searchIndexes=[],this.vectorIndexes=[],this.validator=a}" indexes"(){return this.indexes}index(a,b){return this.indexes.push({indexDescriptor:a,fields:b}),this}searchIndex(a,b){return this.searchIndexes.push({indexDescriptor:a,searchField:b.searchField,filterFields:b.filterFields||[]}),this}vectorIndex(a,b){return this.vectorIndexes.push({indexDescriptor:a,vectorField:b.vectorField,dimensions:b.dimensions,filterFields:b.filterFields||[]}),this}self(){return this}export(){let a=this.validator.json;if("object"!=typeof a)throw Error("Invalid validator: please make sure that the parameter of `defineTable` is valid (see https://docs.convex.dev/database/schemas)");return{indexes:this.indexes,searchIndexes:this.searchIndexes,vectorIndexes:this.vectorIndexes,documentType:a}}}function E(a){return new D((0,y.d)(a)?a:y.v.object(a))}class F{constructor(a,b){C(this,"tables"),C(this,"strictTableNameTypes"),C(this,"schemaValidation"),this.tables=a,this.schemaValidation=b?.schemaValidation===void 0||b.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([a,b])=>{let{indexes:c,searchIndexes:d,vectorIndexes:e,documentType:f}=b.export();return{tableName:a,indexes:c,searchIndexes:d,vectorIndexes:e,documentType:f}}),schemaValidation:this.schemaValidation})}}new F({_scheduled_functions:E({name:y.v.string(),args:y.v.array(y.v.any()),scheduledTime:y.v.float64(),completedTime:y.v.optional(y.v.float64()),state:y.v.union(y.v.object({kind:y.v.literal("pending")}),y.v.object({kind:y.v.literal("inProgress")}),y.v.object({kind:y.v.literal("success")}),y.v.object({kind:y.v.literal("failed"),error:y.v.string()}),y.v.object({kind:y.v.literal("canceled")}))}),_storage:E({sha256:y.v.string(),size:y.v.float64(),contentType:y.v.optional(y.v.string())})},void 0);let G=z.dp;function H(){let[a,b]=(0,e.useState)(!1),[c,d]=(0,e.useState)(null),[g,h]=(0,e.useState)(null),[i,j]=(0,e.useState)(0),[k,l]=(0,e.useState)(0),[m,n]=(0,e.useState)(""),[o,p]=(0,e.useState)(0),[q,r]=(0,e.useState)(null),[s,t]=(0,e.useState)(null),[u,v]=(0,e.useState)(null),w=(0,f.n_)(G.optimizations.createOptimizationRequest),x=(0,f.y3)(G.actions.quickOptimize),y=(0,f.y3)(G.actions.advancedOptimize),z=(0,f.y3)(G.actions.checkOllamaHealth),A=(0,f.IT)(G.optimizations.getSession,c?{sessionId:c}:"skip"),B=(0,e.useCallback)(async(a,c,e=!1,f=2)=>{if(!a.trim())return void h("Prompt cannot be empty");try{let g;b(!0),h(null),j(0),l(0),n("Starting optimization..."),p(0),r(null),t(null),v({prompt:a,contextDomain:c,advanced:e,iterations:f});let i=await w({originalPrompt:a,contextDomain:c||void 0});if(d(i),n(e?"Running advanced PromptWizard optimization...":"Running quick optimization..."),e?(l(3),g=await y({sessionId:i,maxIterations:f})):(l(4),g=await x({sessionId:i})),!g.success)throw Error(g.error||"Optimization failed")}catch(a){console.error("Optimization error:",a),b(!1),h(a instanceof Error?a.message:"An unexpected error occurred"),n("Optimization failed")}},[w,x,y]),C=(0,e.useCallback)(()=>{b(!1),d(null),h(null),j(0),l(0),n(""),p(0),r(null),t(null),v(null)},[]),D=(0,e.useCallback)(async()=>{u&&await B(u.prompt,u.contextDomain,u.advanced,u.iterations)},[u,B]);return{isOptimizing:a,currentSession:A,error:g,currentStep:i,totalSteps:k,progressMessage:m,currentIteration:o,results:q,qualityMetrics:s,startOptimization:B,resetOptimization:C,retryOptimization:D,checkOllamaHealth:(0,e.useCallback)(async()=>{try{return await z({})}catch(a){return{available:!1,model:"qwen3:4b",error:a instanceof Error?a.message:"Health check failed"}}},[z])}}function I({onOptimize:a,isOptimizing:b,useAdvancedMode:c,setUseAdvancedMode:f}){let[g,h]=(0,e.useState)(""),[i,j]=(0,e.useState)(""),[k,l]=(0,e.useState)(2),m=async b=>{if(g.trim())try{await a(g,i,b??c,k),h(""),j("")}catch(a){console.error("Failed to start optimization:",a)}};return(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:`p-4 rounded-lg border-2 transition-all ${!c?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[(0,d.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Quick Optimize"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Single-pass optimization with basic system prompts"}),(0,d.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"⏱️ 60-90 seconds • \uD83D\uDD27 Development demo"})]}),(0,d.jsxs)("div",{className:`p-4 rounded-lg border-2 transition-all ${c?"border-purple-200 bg-purple-50":"border-gray-200 bg-gray-50"}`,children:[(0,d.jsx)("h4",{className:"font-semibold text-purple-900 mb-2",children:"Advanced Mode"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Multi-iteration refinement with multiple system prompts"}),(0,d.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"⏱️ 90-120 seconds • \uD83D\uDD27 Development demo"})]})]}),c&&(0,d.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:["Optimization Iterations: ",k]}),(0,d.jsx)("input",{type:"range",min:"1",max:"5",value:k,onChange:a=>l(parseInt(a.target.value)),className:"w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer slider",disabled:b}),(0,d.jsxs)("div",{className:"flex justify-between text-xs text-purple-600 mt-1",children:[(0,d.jsx)("span",{children:"1 (Fast)"}),(0,d.jsx)("span",{children:"3 (Balanced)"}),(0,d.jsx)("span",{children:"5 (Thorough)"})]})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-700 mb-2",children:"Original Prompt *"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("textarea",{id:"prompt",value:g,onChange:a=>h(a.target.value),placeholder:"Enter the prompt you'd like to optimize using Microsoft PromptWizard techniques...",className:"w-full h-40 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm leading-relaxed",disabled:b}),(0,d.jsxs)("div",{className:"absolute bottom-3 right-3 text-xs text-gray-400",children:[g.length," characters"]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"context",className:"block text-sm font-medium text-gray-700 mb-2",children:"Context Domain (Optional)"}),(0,d.jsx)("input",{id:"context",type:"text",value:i,onChange:a=>j(a.target.value),placeholder:"e.g., marketing, technical documentation, creative writing, data analysis...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:b})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("button",{onClick:()=>m(),disabled:!g.trim()||b,className:`w-full py-4 px-6 font-semibold rounded-lg transition-all duration-200 ${c?"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white shadow-lg":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg"} disabled:bg-gray-400 disabled:cursor-not-allowed disabled:shadow-none`,children:b?(0,d.jsxs)("div",{className:"flex items-center justify-center",children:[(0,d.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c?"Processing Advanced Optimization...":"Optimizing..."]}):(0,d.jsxs)("div",{className:"flex items-center justify-center",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c?"Start Advanced Optimization":"Quick Optimize"]})}),(0,d.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded p-3 mt-2",children:(0,d.jsxs)("p",{className:"text-xs text-amber-800 text-center px-4",children:["⚠️ ",c?"Processing will take 90-120 seconds. This is a development demo using basic system prompts.":"Processing will take 60-90 seconds. This is a development demo using basic system prompts."]})})]})]})]})}function J({isOptimizing:a,currentStep:b,totalSteps:c,message:e}){if(!a)return null;let f=c>0?b/c*100:0;return(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsx)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Optimizing Prompt"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:e}),c>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,d.jsxs)("span",{children:["Step ",b," of ",c]}),(0,d.jsxs)("span",{children:[Math.round(f),"%"]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]})]})})})}function K({label:a,value:b,maxValue:c=10,className:e="",showValue:f=!0}){let g=Math.min(b/c*100,100);return(0,d.jsxs)("div",{className:`space-y-1 ${e}`,children:[(0,d.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,d.jsx)("span",{className:"font-medium text-gray-700",children:a}),f&&(0,d.jsxs)("span",{className:"text-gray-600",children:[b.toFixed(1),"/",c]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,d.jsx)("div",{className:`h-2.5 rounded-full transition-all duration-500 ease-out ${g>=80?"bg-emerald-500":g>=60?"bg-blue-500":g>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${g}%`}})})]})}function L({metrics:a,overallScore:b}){return(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quality Metrics"}),b&&(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Overall Score:"}),(0,d.jsx)("span",{className:"text-xl font-bold text-blue-600",children:b.toFixed(1)})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsx)(K,{label:"Clarity",value:a.clarity}),(0,d.jsx)(K,{label:"Specificity",value:a.specificity}),(0,d.jsx)(K,{label:"Engagement",value:a.engagement}),a.structure&&(0,d.jsx)(K,{label:"Structure",value:a.structure}),a.completeness&&(0,d.jsx)(K,{label:"Completeness",value:a.completeness}),a.errorPrevention&&(0,d.jsx)(K,{label:"Error Prevention",value:a.errorPrevention})]})]})}function M({error:a,onDismiss:b}){return a?(0,d.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:(0,d.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,d.jsx)("span",{className:"text-sm",children:a})]}),(0,d.jsx)("button",{onClick:b,className:"ml-2 text-red-500 hover:text-red-700",children:"\xd7"})]})})}):null}let N=[{_id:"demo-1",status:"completed",qualityScore:8.3,prompt:{originalPrompt:"Write an effective marketing email"},finalResults:{bestPrompt:"Create a compelling, personalized marketing email with clear value proposition, engaging subject line, and specific call-to-action for digital marketing campaigns"},createdAt:Date.now()-864e5},{_id:"demo-2",status:"completed",qualityScore:7.9,prompt:{originalPrompt:"Explain machine learning concepts"},finalResults:{bestPrompt:"Create a comprehensive, step-by-step explanation of core machine learning concepts including specific examples, practical implementations, and real-world applications for technical education"},createdAt:Date.now()-1728e5}];function O({isVisible:a,onClose:b,results:c}){let[f,g]=(0,e.useState)(!1);return a&&c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold",children:"Optimization Results"}),(0,d.jsx)("button",{onClick:b,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.qualityMetrics.overall.toFixed(1)}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Quality Score"})]}),(0,d.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"3"}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Iterations"})]}),(0,d.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"45s"}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Processing Time"})]})]}),(0,d.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"Optimized Prompt:"}),(0,d.jsx)("div",{className:"bg-white rounded border p-3 text-sm",children:c.bestPrompt})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Key Improvements:"}),(0,d.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,d.jsx)("div",{className:"space-y-2",children:c.improvements.map((a,b)=>(0,d.jsxs)("div",{className:"text-sm flex items-start",children:[(0,d.jsx)("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),a]},b))})})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Expert Insights:"}),(0,d.jsx)("div",{className:"bg-indigo-50 rounded-lg p-4",children:(0,d.jsx)("div",{className:"space-y-2",children:c.expertInsights?.map((a,b)=>(0,d.jsxs)("div",{className:"text-sm flex items-start",children:[(0,d.jsx)("span",{className:"inline-block w-2 h-2 bg-indigo-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),a]},b))})})]}),(0,d.jsx)("div",{className:"mt-6 pt-6 border-t",children:(0,d.jsx)("button",{onClick:()=>g(!0),className:"w-full px-4 py-3 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors font-medium",children:"\uD83D\uDCAC Share Feedback on This Optimization"})})]})]})}),f&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Demo Mode"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"This is a demo deployment. Feedback functionality requires a backend connection."}),(0,d.jsx)("button",{onClick:()=>g(!1),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close"})]})})]}):null}function P(){let[a,b]=(0,e.useState)(!1),[c,f]=(0,e.useState)(!1),[g,h]=(0,e.useState)(0),[i,j]=(0,e.useState)(4),[k,l]=(0,e.useState)(""),[m,n]=(0,e.useState)(null),[o,p]=(0,e.useState)(null),q=async(a,c,d,e)=>{if(!a.trim())return;f(!0),n(null),h(0),j(4),l("Starting optimization...");let g=["Analyzing prompt structure...","Generating improvements...","Running quality assessment...","Finalizing results..."];for(let a=0;a<g.length;a++)h(a+1),l(g[a]),await new Promise(a=>setTimeout(a,1500));p(function(a,b,c){console.log("\uD83D\uDD27 REAL OPTIMIZER: Analyzing prompt:",a.substring(0,50)+"..."),console.log("\uD83D\uDD27 REAL OPTIMIZER: Context domain:",b),console.log("\uD83D\uDD27 REAL OPTIMIZER: Advanced mode:",c);let d=function(a){var b;let c,d={length:a.length,hasSpecificGoal:!1,hasContext:!1,hasConstraints:!1,hasExamples:!1,hasOutputFormat:!1,hasRole:!1,hasSteps:!1,domain:function(a){let b=a.toLowerCase();if(/\b(marketing|campaign|advertisement|ad|brand|customer|conversion|sales|lead|a\/b test|ab test)\b/.test(b))return"marketing";if(/\b(code|programming|software|development|function|algorithm|debug|api|database)\b/.test(b))return"programming";if(/\b(business|strategy|management|leadership|finance|revenue|profit|company)\b/.test(b))return"business";if(/\b(design|ui|ux|interface|user experience|visual|layout|creative)\b/.test(b))return"design";if(/\b(content|writing|blog|article|copy|text|documentation)\b/.test(b))return"content";else if(/\b(education|learn|teach|training|course|tutorial|academic)\b/.test(b))return"education";return"general"}(a),tone:function(a){let b=a.toLowerCase();return/\b(professional|formal|business|corporate|official)\b/.test(b)?"professional":/\b(casual|friendly|conversational|informal|relaxed)\b/.test(b)?"casual":/\b(technical|detailed|precise|specific|expert|advanced)\b/.test(b)?"technical":/\b(creative|innovative|original|imaginative|unique)\b/.test(b)?"creative":"neutral"}(a),complexity:(c=0,(b=a).length>200?c+=.3:b.length>100?c+=.2:c+=.1,c+=Math.min(.1*(b.match(/\band\b/g)||[]).length,.3),Math.min(c+=Math.min(.1*(b.match(/\b(implement|analyze|optimize|evaluate|integrate|configure|customize)\b/g)||[]).length,.4),1)),weaknesses:[],strengths:[]},e=a.toLowerCase();return d.hasSpecificGoal=/\b(create|generate|write|develop|build|design|analyze|explain|compare|evaluate)\b/.test(e),d.hasContext=/\b(for|about|regarding|in the context of|background|situation)\b/.test(e),d.hasConstraints=/\b(must|should|within|limit|requirement|criteria|rule)\b/.test(e),d.hasExamples=/\b(example|instance|such as|like|including)\b/.test(e),d.hasOutputFormat=/\b(format|structure|organize|list|table|json|markdown)\b/.test(e),d.hasRole=/\b(as a|act as|you are|assume the role|expert|professional)\b/.test(e),d.hasSteps=/\b(step|process|procedure|method|approach|workflow)\b/.test(e),d.length<20&&d.weaknesses.push("Too brief - lacks necessary detail"),d.hasSpecificGoal||d.weaknesses.push("Goal/objective not clearly defined"),d.hasContext||d.weaknesses.push("Missing context and background information"),d.hasOutputFormat||d.weaknesses.push("Desired output format not specified"),d.length>300&&d.weaknesses.push("May be too verbose - could be more focused"),d.hasSpecificGoal&&d.strengths.push("Clear goal/objective defined"),d.hasContext&&d.strengths.push("Good contextual information provided"),d.hasConstraints&&d.strengths.push("Includes helpful constraints and requirements"),d.hasExamples&&d.strengths.push("Contains examples to clarify intent"),d.hasRole&&d.strengths.push("Specifies desired perspective/expertise level"),d}(a),e=function(a,b){let c={clarity:5,specificity:5,engagement:5,structure:5,completeness:5,errorPrevention:5,overall:0};return b.hasSpecificGoal&&(c.clarity+=1.5),b.hasContext&&(c.clarity+=1),b.length<20&&(c.clarity-=2),b.length>300&&(c.clarity-=.5),b.hasConstraints&&(c.specificity+=1.5),b.hasExamples&&(c.specificity+=1),b.hasOutputFormat&&(c.specificity+=1),"general"!==b.domain&&(c.specificity+=.5),b.hasRole&&(c.engagement+=1),"neutral"!==b.tone&&(c.engagement+=.5),b.hasExamples&&(c.engagement+=1),b.complexity>.5&&(c.engagement+=.5),b.hasSteps&&(c.structure+=1.5),b.hasOutputFormat&&(c.structure+=1),(a.includes("\n")||a.includes("•")||a.includes("-"))&&(c.structure+=.5),c.completeness+=.5*b.strengths.length,c.completeness-=.3*b.weaknesses.length,b.hasConstraints&&(c.errorPrevention+=1),b.hasExamples&&(c.errorPrevention+=.5),b.hasOutputFormat&&(c.errorPrevention+=1),Object.keys(c).forEach(a=>{"overall"!==a&&(c[a]=Math.max(3,Math.min(10,c[a])))}),c.overall=(c.clarity+c.specificity+c.engagement+c.structure+c.completeness+c.errorPrevention)/6,c}(a,d),f=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;let n,o,p,q=a,r=[],s=[];return"marketing"===b.domain?(e=a,f=b,g=d,n=e,f.hasRole||(n="As an experienced marketing strategist, "+n.toLowerCase()),e.includes("target audience")||(n+="\n\nSpecify the target audience demographics, psychographics, and pain points."),e.includes("metric")||e.includes("measure")||(n+=" Include specific KPIs and success metrics to measure campaign effectiveness."),g&&(n+="\n\nAdvanced requirements:\n• Provide statistical significance calculations for A/B tests\n• Include conversion funnel analysis\n• Consider budget allocation and ROI projections\n• Account for seasonal trends and market conditions"),q=n,r.push("Enhanced for marketing effectiveness and conversion focus"),r.push("Added specific metrics and success criteria for campaigns"),s.push("Marketing prompts benefit from clear target audience definition"),s.push("A/B testing requires specific variables and measurement criteria")):"programming"===b.domain?(h=a,i=b,j=d,o=h,i.hasRole||(o="As a senior software engineer, "+o.toLowerCase()),h.includes("language")||h.includes("framework")||(o+=" Specify the programming language, framework, and version requirements."),j&&(o+="\n\nTechnical requirements:\n• Include error handling and edge cases\n• Provide unit tests and documentation\n• Consider performance optimization and scalability\n• Follow industry best practices and design patterns"),q=o,r.push("Added technical requirements and implementation details"),r.push("Specified programming languages and frameworks"),s.push("Code-related prompts need clear input/output specifications"),s.push("Including error handling and edge cases improves code quality")):(k=a,l=b,m=d,p=k,l.hasOutputFormat||(p+=" Please provide a well-structured response with clear sections and actionable insights."),!l.hasContext&&l.weaknesses.includes("Missing context and background information")&&(p+=" Include relevant background context and explain your reasoning."),m&&(p+="\n\nAdvanced requirements:\n• Provide multiple perspectives or approaches\n• Include potential challenges and mitigation strategies\n• Reference current best practices and industry standards"),q=p,r.push("Improved clarity and structure"),r.push("Added context and specific requirements"),s.push("Clear prompts lead to more accurate AI responses"),s.push("Specific examples help AI understand the desired output")),c&&"general"!==c&&c!==b.domain&&(q+=`

Context: This should be tailored specifically for ${c} applications and best practices.`,r.push(`Customized for ${c} domain requirements`),s.push("Domain-specific context ensures relevant and accurate responses")),{optimizedPrompt:q,improvements:r.slice(0,4),expertInsights:s.slice(0,3),reasoning:`Optimized based on ${b.domain} domain analysis with ${b.weaknesses.length} identified improvements and ${b.strengths.length} preserved strengths.`}}(a,d,b,c),g={bestPrompt:f.optimizedPrompt,improvements:f.improvements,qualityMetrics:e,reasoning:f.reasoning,expertInsights:f.expertInsights};return console.log("\uD83D\uDD27 REAL OPTIMIZER: Generated optimization:",f.optimizedPrompt.substring(0,100)+"..."),g}(a,c,d)),f(!1),l("Optimization completed!"),b(!0)},r=async()=>{alert(JSON.stringify({status:"Demo Mode",message:"This is a frontend-only demo deployment. Backend health check requires Convex connection.",available:!1,model:"qwen3:4b"},null,2))};return(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,d.jsx)(J,{isOptimizing:c,currentStep:g,totalSteps:i,message:k}),(0,d.jsx)(O,{isVisible:a,onClose:()=>b(!1),results:o}),(0,d.jsx)(M,{error:m,onDismiss:()=>{n(null),f(!1),h(0),l("")}}),(0,d.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,d.jsxs)("header",{className:"text-center mb-12",children:[(0,d.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mb-4",children:(0,d.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,d.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-4",children:"PromptEvolver"}),(0,d.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 max-w-2xl mx-auto",children:[(0,d.jsx)("p",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"\uD83C\uDFAF Demo Mode - Frontend Only"}),(0,d.jsx)("p",{className:"text-sm text-yellow-700",children:"This is a demo deployment showing the UI and simulated functionality • No backend processing"})]}),(0,d.jsx)("p",{className:"text-xl text-gray-600 mb-6 max-w-2xl mx-auto",children:"Advanced Prompt Optimization Demo - UI Preview"}),(0,d.jsx)("div",{className:"flex flex-wrap justify-center gap-4",children:(0,d.jsxs)("button",{onClick:r,className:"inline-flex items-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors shadow-md",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"System Health (Demo)"]})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[(0,d.jsx)(I,{onOptimize:q,isOptimizing:c,useAdvancedMode:!1,setUseAdvancedMode:()=>{}}),(0,d.jsx)("div",{className:"xl:col-span-2",children:(0,d.jsx)(L,{metrics:o?.qualityMetrics||{clarity:8.5,specificity:7.8,engagement:9.2,structure:8,completeness:8.7,errorPrevention:7.5,overall:8.3},overallScore:o?.qualityMetrics?.overall||8.3})}),(0,d.jsxs)("div",{className:"xl:col-span-1 space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Session Stats"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:N.length}),(0,d.jsx)("div",{className:"text-xs text-gray-600",children:"Demo Sessions"})]}),(0,d.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:N.filter(a=>"completed"===a.status).length}),(0,d.jsx)("div",{className:"text-xs text-gray-600",children:"Completed"})]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Demo Optimizations"}),(0,d.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,d.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:N.map(a=>(0,d.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,d.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),a.status]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-yellow-400 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a.qualityScore.toFixed(1)})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-1",children:"Original:"}),(0,d.jsxs)("p",{className:"text-sm text-gray-700 line-clamp-2",children:[a.prompt?.originalPrompt.substring(0,80),(a.prompt?.originalPrompt.length||0)>80&&"..."]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-1",children:"Optimized:"}),(0,d.jsxs)("p",{className:"text-sm text-gray-900 line-clamp-2",children:[a.finalResults?.bestPrompt.substring(0,80),a.finalResults?.bestPrompt.length>80&&"..."]})]})]}),(0,d.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(a.createdAt).toLocaleDateString()]}),(0,d.jsx)("button",{className:"text-blue-600 hover:text-blue-800 font-medium",children:"Demo Data"})]})]},a._id))})]})]})]}),(0,d.jsx)("footer",{className:"text-center mt-16 pb-8",children:(0,d.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,d.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-6 text-sm text-gray-600",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),(0,d.jsx)("span",{children:"Next.js 15 + React 19"})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),(0,d.jsx)("span",{children:"Demo Mode - Frontend Only"})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,d.jsx)("span",{children:"126 kB Bundle Size"})]})]}),(0,d.jsx)("div",{className:"mt-4 text-xs text-blue-600 font-medium",children:"\uD83C\uDFAF Frontend demo deployment - Full functionality requires Convex backend"})]})})})]})]})}let Q="https://resilient-guanaco-29.convex.cloud",R=Q&&""!==Q.trim();function S({isVisible:a,onClose:b}){let{results:c,currentSession:f,qualityMetrics:g}=H(),[h,i]=(0,e.useState)(!1);return a&&c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold",children:"Optimization Results"}),(0,d.jsx)("button",{onClick:b,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.qualityMetrics.overall?.toFixed(1)||"N/A"}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Quality Score"})]}),(0,d.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:f?.iterationsCompleted||1}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Iterations"})]}),(0,d.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,d.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round((f?.processingTimeMs||0)/1e3),"s"]}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Processing Time"})]})]}),c.bestPrompt&&(0,d.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"Optimized Prompt:"}),(0,d.jsx)("div",{className:"bg-white rounded border p-3 text-sm",children:c.bestPrompt})]}),c.improvements&&c.improvements.length>0&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Key Improvements:"}),(0,d.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,d.jsx)("div",{className:"space-y-2",children:c.improvements.map((a,b)=>(0,d.jsxs)("div",{className:"text-sm flex items-start",children:[(0,d.jsx)("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),a]},b))})})]}),c.expertInsights&&c.expertInsights.length>0&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Expert Insights:"}),(0,d.jsx)("div",{className:"bg-indigo-50 rounded-lg p-4",children:(0,d.jsx)("div",{className:"space-y-2",children:c.expertInsights.map((a,b)=>(0,d.jsxs)("div",{className:"text-sm flex items-start",children:[(0,d.jsx)("span",{className:"inline-block w-2 h-2 bg-indigo-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),a]},b))})})]}),(0,d.jsx)("div",{className:"mt-6 pt-6 border-t",children:(0,d.jsx)("button",{onClick:()=>i(!0),className:"w-full px-4 py-3 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors font-medium",children:"\uD83D\uDCAC Share Feedback on This Optimization"})})]})]})}),h&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Feedback Not Available"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"Feedback component is not yet implemented in this development demo."}),(0,d.jsx)("button",{onClick:()=>i(!1),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close"})]})})]}):null}function T(){let[a,b]=(0,e.useState)(!1),[c,g]=(0,e.useState)(!1),h=H();!function(){let[a,b]=(0,e.useState)(!1),[c,d]=(0,e.useState)(null),[f,g]=(0,e.useState)(0),[h,i]=(0,e.useState)(4),[j,k]=(0,e.useState)(""),[l,m]=(0,e.useState)(0),[n,o]=(0,e.useState)(null),[p,q]=(0,e.useState)(null),[r,s]=(0,e.useState)(null),t=async a=>{i(a.length);for(let b=0;b<a.length;b++)g(b+1),k(a[b]),m(b+1),await new Promise(a=>setTimeout(a,1e3+1500*Math.random()))};(0,e.useCallback)(async(a,c="general",e=!1,f=2)=>{if(!a.trim())return void d("Prompt cannot be empty");try{let f;b(!0),d(null),g(0),k("Initializing optimization..."),m(0),o(null),q(null),s(null),console.log("\uD83D\uDE80 DIRECT API: Starting real optimization"),console.log("\uD83D\uDE80 DIRECT API: Prompt:",a.substring(0,50)+"..."),console.log("\uD83D\uDE80 DIRECT API: Domain:",c),console.log("\uD83D\uDE80 DIRECT API: Advanced:",e);let h=t(e?["Generating expert identity...","Applying PromptWizard methodology...","Processing with Qwen3:4b model...","Calculating quality metrics...","Finalizing optimization..."]:["Analyzing prompt structure...","Applying critique_n_refine...","Processing with Qwen3:4b...","Generating improvements..."]),i=await fetch("/api/optimize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a.trim(),contextDomain:c,useAdvancedMode:e})});if(!i.ok){let a=await i.json();throw Error(a.error||"API request failed")}let j=await i.json();if(!j.success)throw Error(j.error||"Optimization failed");await h,o(j.result),q(j.result.qualityMetrics),s((f=j.result,{_id:`session-${Date.now()}`,status:"completed",iterationsCompleted:3,processingTimeMs:45e3,qualityScore:f.qualityMetrics.overall,prompt:{originalPrompt:f.originalPrompt},createdAt:Date.now()})),k("Optimization completed successfully!"),console.log("\uD83D\uDE80 DIRECT API: Optimization completed successfully"),console.log("\uD83D\uDE80 DIRECT API: Quality score:",j.result.qualityMetrics.overall)}catch(a){console.error("\uD83D\uDE80 DIRECT API: Optimization error:",a),d(a instanceof Error?a.message:"An unexpected error occurred"),k("Optimization failed")}finally{b(!1)}},[]),(0,e.useCallback)(()=>{b(!1),d(null),g(0),i(4),k(""),m(0),o(null),q(null),s(null)},[]),(0,e.useCallback)(async()=>{try{console.log("\uD83E\uDE7A HEALTH CHECK: Testing direct API connection...");let a=await fetch("/api/optimize",{method:"GET"});if(a.ok){let b=await a.json();return console.log("\uD83E\uDE7A HEALTH CHECK: Success -",b),{available:"healthy"===b.status,model:b.model||"qwen3:4b",error:"healthy"!==b.status?b.error:void 0}}throw Error(`Health check failed: ${a.status}`)}catch(a){return console.error("\uD83E\uDE7A HEALTH CHECK: Error -",a),{available:!1,model:"qwen3:4b",error:a instanceof Error?a.message:"Health check failed"}}},[])}();let{isOptimizing:i,currentStep:j,totalSteps:k,progressMessage:l,currentIteration:m,results:n,qualityMetrics:o,error:p,startOptimization:q,resetOptimization:r,checkOllamaHealth:s}=h,{sessions:t,isLoading:u}=function(a=10){let b=(0,f.IT)(G.sessions.getRecentSessions,{limit:a});return{sessions:b||[],isLoading:void 0===b}}(5);if(!R)return(0,d.jsx)(P,{});let v=async(a,c,d,e)=>{if(a.trim())try{await q(a,c,d,e),b(!0)}catch(a){console.error("Failed to start optimization:",a)}},w=async()=>{try{let a=await s();alert(JSON.stringify(a,null,2))}catch(a){alert("Health check failed: "+a)}};return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)(J,{isOptimizing:i,currentStep:j,totalSteps:k,message:l}),(0,d.jsx)(S,{isVisible:a,onClose:()=>b(!1)}),(0,d.jsx)(M,{error:p,onDismiss:r}),(0,d.jsxs)("div",{className:"desktop-app-layout flex",children:[(0,d.jsxs)("div",{className:"desktop-sidebar w-80 border-r border-gray-200 flex flex-col",children:[(0,d.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-lg",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"PromptEvolver"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"AI Prompt Optimization"})]})]})}),(0,d.jsx)("div",{className:"flex-1 p-6",children:(0,d.jsxs)("nav",{className:"space-y-2",children:[(0,d.jsx)("div",{className:"nav-item active bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 011-1h1a2 2 0 100-4H7a1 1 0 01-1-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium text-blue-900",children:"Optimize"}),(0,d.jsx)("p",{className:"text-sm text-blue-700",children:"Main workspace"})]})]})}),(0,d.jsx)("button",{className:"nav-item w-full text-left p-3 rounded-lg",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900",children:"History"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Past optimizations"})]})]})}),(0,d.jsx)("button",{className:"nav-item w-full text-left p-3 rounded-lg",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900",children:"Analytics"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Performance metrics"})]})]})}),(0,d.jsx)("button",{className:"nav-item w-full text-left p-3 rounded-lg",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,d.jsxs)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900",children:"Settings"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Configuration"})]})]})})]})}),(0,d.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[(0,d.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-green-800",children:"REAL PromptWizard + Qwen3:4b"}),(0,d.jsx)("p",{className:"text-xs text-green-700 mt-1",children:"Microsoft PromptWizard • Qwen3:4b AI Model • Direct API Integration"})]})]})}),(0,d.jsxs)("button",{onClick:w,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsx)("span",{className:"text-sm font-medium",children:"System Health"})]})]})]}),(0,d.jsxs)("div",{className:"desktop-main-content flex overflow-hidden",children:[(0,d.jsx)("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Prompt Optimization Workspace"}),(0,d.jsx)("p",{className:"text-gray-600 mt-1",children:"Create and refine AI prompts using advanced optimization techniques"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,d.jsx)("div",{className:"status-dot w-2 h-2 bg-green-500 rounded-full"}),(0,d.jsx)("span",{children:"PromptWizard + Qwen3:4b Ready"})]})]}),(0,d.jsxs)("div",{className:"desktop-card bg-white rounded-xl shadow-sm",children:[(0,d.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"New Optimization"}),(0,d.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,d.jsx)("button",{onClick:()=>g(!1),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all desktop-focus ${!c?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Quick"}),(0,d.jsx)("button",{onClick:()=>g(!0),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all desktop-focus ${c?"bg-purple-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Advanced"})]})]})}),(0,d.jsx)(I,{onOptimize:v,isOptimizing:i,useAdvancedMode:c,setUseAdvancedMode:g})]}),o&&(0,d.jsx)("div",{className:"desktop-card bg-white rounded-xl shadow-sm",children:(0,d.jsx)(L,{metrics:o,overallScore:n?.qualityMetrics.overall})})]})}),(0,d.jsxs)("div",{className:"w-96 bg-white border-l border-gray-200 p-6 overflow-y-auto custom-scrollbar",children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Status"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"desktop-card flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-green-900",children:"Ollama"}),(0,d.jsx)("p",{className:"text-sm text-green-700",children:"Connected"})]})]}),(0,d.jsx)("div",{className:"status-dot w-2 h-2 bg-green-500 rounded-full"})]}),(0,d.jsxs)("div",{className:"desktop-card flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-blue-900",children:"PromptWizard"}),(0,d.jsx)("p",{className:"text-sm text-blue-700",children:"Active"})]})]}),(0,d.jsx)("div",{className:"status-dot w-2 h-2 bg-blue-500 rounded-full"})]})]})]}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Session Overview"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"desktop-card text-center p-4 bg-blue-50 rounded-lg",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t?.length||0}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Total"})]}),(0,d.jsxs)("div",{className:"desktop-card text-center p-4 bg-green-50 rounded-lg",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t?.filter(a=>"completed"===a.status).length||0}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),(0,d.jsx)("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium desktop-focus",children:"View All"})]}),u?(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)("div",{className:"loading-pulse animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading..."})]}):0===t.length?(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)("div",{className:"w-12 h-12 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,d.jsx)("p",{className:"text-gray-500 font-medium text-sm",children:"No sessions yet"}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Start optimizing to see history"})]}):(0,d.jsx)("div",{className:"space-y-3",children:t.slice(0,4).map(a=>(0,d.jsxs)("div",{className:"desktop-card p-3 border border-gray-200 rounded-lg cursor-pointer",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,d.jsxs)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${"completed"===a.status?"bg-green-100 text-green-800":"processing"===a.status?"bg-yellow-100 text-yellow-800":"failed"===a.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:["completed"===a.status&&"✓ ",a.status||"pending"]}),a.qualityScore&&(0,d.jsxs)("div",{className:"flex items-center text-xs",children:[(0,d.jsx)("svg",{className:"w-3 h-3 text-yellow-400 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,d.jsx)("span",{className:"text-gray-700",children:a.qualityScore.toFixed(1)})]})]}),(0,d.jsxs)("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:[a.prompt?.originalPrompt.substring(0,60),(a.prompt?.originalPrompt.length||0)>60&&"..."]}),(0,d.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,d.jsx)("span",{children:new Date(a.createdAt).toLocaleDateString()}),(0,d.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},a._id))})]})]})]})]})]})}},8354:a=>{"use strict";a.exports=require("util")},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9698:(a,b,c)=>{Promise.resolve().then(c.bind(c,4620))}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[985,278],()=>b(b.s=85));module.exports=c})();