(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4128:(e,s,t)=>{Promise.resolve().then(t.bind(t,5062))},5062:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var i=t(5155),a=t(2115),n=t(7928);let l=t(3312).dp;function r(){let[e,s]=(0,a.useState)(!1),[t,i]=(0,a.useState)(null),[r,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(0),[m,u]=(0,a.useState)(0),[x,p]=(0,a.useState)(""),[h,g]=(0,a.useState)(0),[b,f]=(0,a.useState)(null),[v,j]=(0,a.useState)(null),[y,N]=(0,a.useState)(null),w=(0,n.n_)(l.optimizations.createOptimizationRequest),k=(0,n.n_)(l.actions.quickOptimize),z=(0,n.n_)(l.actions.advancedOptimize),C=(0,n.n_)(l.actions.checkOllamaHealth),S=(0,n.IT)(l.optimizations.getSession,t?{sessionId:t}:"skip");(0,a.useEffect)(()=>{if(S&&e){if(S.progressSteps){d(S.progressSteps.filter(e=>"completed"===e.status).length+S.progressSteps.filter(e=>"processing"===e.status).length),u(S.progressSteps.length);let e=S.progressSteps.find(e=>"processing"===e.status);e&&p(e.step)}S.currentIteration&&g(S.currentIteration),"completed"===S.status&&(s(!1),S.finalResults&&(f(S.finalResults),j(S.finalResults.qualityMetrics)),p("Optimization completed successfully!")),"failed"===S.status&&(s(!1),o(S.errorMessage||"Optimization failed"),p("Optimization failed"))}},[S,e]);let O=(0,a.useCallback)(async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;if(!e.trim())return void o("Prompt cannot be empty");try{let l;s(!0),o(null),d(0),u(0),p("Starting optimization..."),g(0),f(null),j(null),N({prompt:e,contextDomain:t,advanced:a,iterations:n});let r=await w({originalPrompt:e,contextDomain:t||void 0});if(i(r),p(a?"Running advanced PromptWizard optimization...":"Running quick optimization..."),a?(u(3),l=await z({sessionId:r,maxIterations:n})):(u(4),l=await k({sessionId:r})),!l.success)throw Error(l.error||"Optimization failed")}catch(e){console.error("Optimization error:",e),s(!1),o(e instanceof Error?e.message:"An unexpected error occurred"),p("Optimization failed")}},[w,k,z]),P=(0,a.useCallback)(()=>{s(!1),i(null),o(null),d(0),u(0),p(""),g(0),f(null),j(null),N(null)},[]),I=(0,a.useCallback)(async()=>{y&&await O(y.prompt,y.contextDomain,y.advanced,y.iterations)},[y,O]);return{isOptimizing:e,currentSession:S,error:r,currentStep:c,totalSteps:m,progressMessage:x,currentIteration:h,results:b,qualityMetrics:v,startOptimization:O,resetOptimization:P,retryOptimization:I,checkOllamaHealth:(0,a.useCallback)(async()=>{try{return await C({})}catch(e){return{available:!1,model:"qwen3:4b",error:e instanceof Error?e.message:"Health check failed"}}},[C])}}function o(e){let{onOptimize:s,isOptimizing:t,useAdvancedMode:n,setUseAdvancedMode:l}=e,[r,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[m,u]=(0,a.useState)(2),x=async e=>{if(r.trim())try{await s(r,c,null!=e?e:n,m),o(""),d("")}catch(e){console.error("Failed to start optimization:",e)}};return(0,i.jsxs)("div",{className:"p-6 space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat(n?"border-gray-200 bg-gray-50":"border-blue-200 bg-blue-50"),children:[(0,i.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Quick Optimize"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Single-pass optimization with basic system prompts"}),(0,i.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"⏱️ 60-90 seconds • \uD83D\uDD27 Development demo"})]}),(0,i.jsxs)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat(n?"border-purple-200 bg-purple-50":"border-gray-200 bg-gray-50"),children:[(0,i.jsx)("h4",{className:"font-semibold text-purple-900 mb-2",children:"Advanced Mode"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Multi-iteration refinement with multiple system prompts"}),(0,i.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"⏱️ 90-120 seconds • \uD83D\uDD27 Development demo"})]})]}),n&&(0,i.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:["Optimization Iterations: ",m]}),(0,i.jsx)("input",{type:"range",min:"1",max:"5",value:m,onChange:e=>u(parseInt(e.target.value)),className:"w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer slider",disabled:t}),(0,i.jsxs)("div",{className:"flex justify-between text-xs text-purple-600 mt-1",children:[(0,i.jsx)("span",{children:"1 (Fast)"}),(0,i.jsx)("span",{children:"3 (Balanced)"}),(0,i.jsx)("span",{children:"5 (Thorough)"})]})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-700 mb-2",children:"Original Prompt *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("textarea",{id:"prompt",value:r,onChange:e=>o(e.target.value),placeholder:"Enter the prompt you'd like to optimize using Microsoft PromptWizard techniques...",className:"w-full h-40 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm leading-relaxed",disabled:t}),(0,i.jsxs)("div",{className:"absolute bottom-3 right-3 text-xs text-gray-400",children:[r.length," characters"]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"context",className:"block text-sm font-medium text-gray-700 mb-2",children:"Context Domain (Optional)"}),(0,i.jsx)("input",{id:"context",type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"e.g., marketing, technical documentation, creative writing, data analysis...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:t})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("button",{onClick:()=>x(),disabled:!r.trim()||t,className:"w-full py-4 px-6 font-semibold rounded-lg transition-all duration-200 ".concat(n?"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white shadow-lg":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg"," disabled:bg-gray-400 disabled:cursor-not-allowed disabled:shadow-none"),children:t?(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n?"Processing Advanced Optimization...":"Optimizing..."]}):(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),n?"Start Advanced Optimization":"Quick Optimize"]})}),(0,i.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded p-3 mt-2",children:(0,i.jsxs)("p",{className:"text-xs text-amber-800 text-center px-4",children:["⚠️ ",n?"Processing will take 90-120 seconds. This is a development demo using basic system prompts.":"Processing will take 60-90 seconds. This is a development demo using basic system prompts."]})})]})]})]})}function c(e){let{isOptimizing:s,currentStep:t,totalSteps:a,message:n}=e;if(!s)return null;let l=a>0?t/a*100:0;return(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsx)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,i.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Optimizing Prompt"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:n}),a>0&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,i.jsxs)("span",{children:["Step ",t," of ",a]}),(0,i.jsxs)("span",{children:[Math.round(l),"%"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(l,"%")}})})]})]})})})}function d(e){let{label:s,value:t,maxValue:a=10,className:n="",showValue:l=!0}=e,r=Math.min(t/a*100,100);return(0,i.jsxs)("div",{className:"space-y-1 ".concat(n),children:[(0,i.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:s}),l&&(0,i.jsxs)("span",{className:"text-gray-600",children:[t.toFixed(1),"/",a]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,i.jsx)("div",{className:"h-2.5 rounded-full transition-all duration-500 ease-out ".concat(r>=80?"bg-emerald-500":r>=60?"bg-blue-500":r>=40?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(r,"%")}})})]})}function m(e){let{metrics:s,overallScore:t}=e;return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quality Metrics"}),t&&(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Overall Score:"}),(0,i.jsx)("span",{className:"text-xl font-bold text-blue-600",children:t.toFixed(1)})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsx)(d,{label:"Clarity",value:s.clarity}),(0,i.jsx)(d,{label:"Specificity",value:s.specificity}),(0,i.jsx)(d,{label:"Engagement",value:s.engagement}),s.structure&&(0,i.jsx)(d,{label:"Structure",value:s.structure}),s.completeness&&(0,i.jsx)(d,{label:"Completeness",value:s.completeness}),s.errorPrevention&&(0,i.jsx)(d,{label:"Error Prevention",value:s.errorPrevention})]})]})}function u(e){let{error:s,onDismiss:t}=e;return s?(0,i.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:(0,i.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,i.jsx)("span",{className:"text-sm",children:s})]}),(0,i.jsx)("button",{onClick:t,className:"ml-2 text-red-500 hover:text-red-700",children:"\xd7"})]})})}):null}let x=[{_id:"demo-1",status:"completed",qualityScore:8.3,prompt:{originalPrompt:"Write an effective marketing email"},finalResults:{bestPrompt:"Create a compelling, personalized marketing email with clear value proposition, engaging subject line, and specific call-to-action for digital marketing campaigns"},createdAt:Date.now()-864e5},{_id:"demo-2",status:"completed",qualityScore:7.9,prompt:{originalPrompt:"Explain machine learning concepts"},finalResults:{bestPrompt:"Create a comprehensive, step-by-step explanation of core machine learning concepts including specific examples, practical implementations, and real-world applications for technical education"},createdAt:Date.now()-1728e5}];function p(e){var s;let{isVisible:t,onClose:n,results:l}=e,[r,o]=(0,a.useState)(!1);return t&&l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Optimization Results"}),(0,i.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,i.jsxs)("div",{className:"p-6 space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l.qualityMetrics.overall.toFixed(1)}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Quality Score"})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"3"}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Iterations"})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"45s"}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Processing Time"})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold mb-2",children:"Optimized Prompt:"}),(0,i.jsx)("div",{className:"bg-white rounded border p-3 text-sm",children:l.bestPrompt})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"font-semibold",children:"Key Improvements:"}),(0,i.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,i.jsx)("div",{className:"space-y-2",children:l.improvements.map((e,s)=>(0,i.jsxs)("div",{className:"text-sm flex items-start",children:[(0,i.jsx)("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),e]},s))})})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"font-semibold",children:"Expert Insights:"}),(0,i.jsx)("div",{className:"bg-indigo-50 rounded-lg p-4",children:(0,i.jsx)("div",{className:"space-y-2",children:null==(s=l.expertInsights)?void 0:s.map((e,s)=>(0,i.jsxs)("div",{className:"text-sm flex items-start",children:[(0,i.jsx)("span",{className:"inline-block w-2 h-2 bg-indigo-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),e]},s))})})]}),(0,i.jsx)("div",{className:"mt-6 pt-6 border-t",children:(0,i.jsx)("button",{onClick:()=>o(!0),className:"w-full px-4 py-3 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors font-medium",children:"\uD83D\uDCAC Share Feedback on This Optimization"})})]})]})}),r&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Demo Mode"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"This is a demo deployment. Feedback functionality requires a backend connection."}),(0,i.jsx)("button",{onClick:()=>o(!1),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close"})]})})]}):null}function h(){var e;let[s,t]=(0,a.useState)(!1),[n,l]=(0,a.useState)(!1),[r,d]=(0,a.useState)(0),[h,g]=(0,a.useState)(4),[b,f]=(0,a.useState)(""),[v,j]=(0,a.useState)(null),[y,N]=(0,a.useState)(null),w=async(e,s,i,a)=>{if(!e.trim())return;l(!0),j(null),d(0),g(4),f("Starting optimization...");let n=["Analyzing prompt structure...","Generating improvements...","Running quality assessment...","Finalizing results..."];for(let e=0;e<n.length;e++)d(e+1),f(n[e]),await new Promise(e=>setTimeout(e,1500));N(function(e,s,t){console.log("\uD83D\uDD27 REAL OPTIMIZER: Analyzing prompt:",e.substring(0,50)+"..."),console.log("\uD83D\uDD27 REAL OPTIMIZER: Context domain:",s),console.log("\uD83D\uDD27 REAL OPTIMIZER: Advanced mode:",t);let i=function(e){var s;let t,i={length:e.length,hasSpecificGoal:!1,hasContext:!1,hasConstraints:!1,hasExamples:!1,hasOutputFormat:!1,hasRole:!1,hasSteps:!1,domain:function(e){let s=e.toLowerCase();if(/\b(marketing|campaign|advertisement|ad|brand|customer|conversion|sales|lead|a\/b test|ab test)\b/.test(s))return"marketing";if(/\b(code|programming|software|development|function|algorithm|debug|api|database)\b/.test(s))return"programming";if(/\b(business|strategy|management|leadership|finance|revenue|profit|company)\b/.test(s))return"business";if(/\b(design|ui|ux|interface|user experience|visual|layout|creative)\b/.test(s))return"design";if(/\b(content|writing|blog|article|copy|text|documentation)\b/.test(s))return"content";else if(/\b(education|learn|teach|training|course|tutorial|academic)\b/.test(s))return"education";return"general"}(e),tone:function(e){let s=e.toLowerCase();return/\b(professional|formal|business|corporate|official)\b/.test(s)?"professional":/\b(casual|friendly|conversational|informal|relaxed)\b/.test(s)?"casual":/\b(technical|detailed|precise|specific|expert|advanced)\b/.test(s)?"technical":/\b(creative|innovative|original|imaginative|unique)\b/.test(s)?"creative":"neutral"}(e),complexity:(t=0,(s=e).length>200?t+=.3:s.length>100?t+=.2:t+=.1,t+=Math.min(.1*(s.match(/\band\b/g)||[]).length,.3),Math.min(t+=Math.min(.1*(s.match(/\b(implement|analyze|optimize|evaluate|integrate|configure|customize)\b/g)||[]).length,.4),1)),weaknesses:[],strengths:[]},a=e.toLowerCase();return i.hasSpecificGoal=/\b(create|generate|write|develop|build|design|analyze|explain|compare|evaluate)\b/.test(a),i.hasContext=/\b(for|about|regarding|in the context of|background|situation)\b/.test(a),i.hasConstraints=/\b(must|should|within|limit|requirement|criteria|rule)\b/.test(a),i.hasExamples=/\b(example|instance|such as|like|including)\b/.test(a),i.hasOutputFormat=/\b(format|structure|organize|list|table|json|markdown)\b/.test(a),i.hasRole=/\b(as a|act as|you are|assume the role|expert|professional)\b/.test(a),i.hasSteps=/\b(step|process|procedure|method|approach|workflow)\b/.test(a),i.length<20&&i.weaknesses.push("Too brief - lacks necessary detail"),i.hasSpecificGoal||i.weaknesses.push("Goal/objective not clearly defined"),i.hasContext||i.weaknesses.push("Missing context and background information"),i.hasOutputFormat||i.weaknesses.push("Desired output format not specified"),i.length>300&&i.weaknesses.push("May be too verbose - could be more focused"),i.hasSpecificGoal&&i.strengths.push("Clear goal/objective defined"),i.hasContext&&i.strengths.push("Good contextual information provided"),i.hasConstraints&&i.strengths.push("Includes helpful constraints and requirements"),i.hasExamples&&i.strengths.push("Contains examples to clarify intent"),i.hasRole&&i.strengths.push("Specifies desired perspective/expertise level"),i}(e),a=function(e,s){let t={clarity:5,specificity:5,engagement:5,structure:5,completeness:5,errorPrevention:5,overall:0};return s.hasSpecificGoal&&(t.clarity+=1.5),s.hasContext&&(t.clarity+=1),s.length<20&&(t.clarity-=2),s.length>300&&(t.clarity-=.5),s.hasConstraints&&(t.specificity+=1.5),s.hasExamples&&(t.specificity+=1),s.hasOutputFormat&&(t.specificity+=1),"general"!==s.domain&&(t.specificity+=.5),s.hasRole&&(t.engagement+=1),"neutral"!==s.tone&&(t.engagement+=.5),s.hasExamples&&(t.engagement+=1),s.complexity>.5&&(t.engagement+=.5),s.hasSteps&&(t.structure+=1.5),s.hasOutputFormat&&(t.structure+=1),(e.includes("\n")||e.includes("•")||e.includes("-"))&&(t.structure+=.5),t.completeness+=.5*s.strengths.length,t.completeness-=.3*s.weaknesses.length,s.hasConstraints&&(t.errorPrevention+=1),s.hasExamples&&(t.errorPrevention+=.5),s.hasOutputFormat&&(t.errorPrevention+=1),Object.keys(t).forEach(e=>{"overall"!==e&&(t[e]=Math.max(3,Math.min(10,t[e])))}),t.overall=(t.clarity+t.specificity+t.engagement+t.structure+t.completeness+t.errorPrevention)/6,t}(e,i),n=function(e,s,t,i){var a,n,l,r,o,c,d,m,u;let x,p,h,g=e,b=[],f=[];return"marketing"===s.domain?(a=e,n=s,l=i,x=a,n.hasRole||(x="As an experienced marketing strategist, "+x.toLowerCase()),a.includes("target audience")||(x+="\n\nSpecify the target audience demographics, psychographics, and pain points."),a.includes("metric")||a.includes("measure")||(x+=" Include specific KPIs and success metrics to measure campaign effectiveness."),l&&(x+="\n\nAdvanced requirements:\n• Provide statistical significance calculations for A/B tests\n• Include conversion funnel analysis\n• Consider budget allocation and ROI projections\n• Account for seasonal trends and market conditions"),g=x,b.push("Enhanced for marketing effectiveness and conversion focus"),b.push("Added specific metrics and success criteria for campaigns"),f.push("Marketing prompts benefit from clear target audience definition"),f.push("A/B testing requires specific variables and measurement criteria")):"programming"===s.domain?(r=e,o=s,c=i,p=r,o.hasRole||(p="As a senior software engineer, "+p.toLowerCase()),r.includes("language")||r.includes("framework")||(p+=" Specify the programming language, framework, and version requirements."),c&&(p+="\n\nTechnical requirements:\n• Include error handling and edge cases\n• Provide unit tests and documentation\n• Consider performance optimization and scalability\n• Follow industry best practices and design patterns"),g=p,b.push("Added technical requirements and implementation details"),b.push("Specified programming languages and frameworks"),f.push("Code-related prompts need clear input/output specifications"),f.push("Including error handling and edge cases improves code quality")):(d=e,m=s,u=i,h=d,m.hasOutputFormat||(h+=" Please provide a well-structured response with clear sections and actionable insights."),!m.hasContext&&m.weaknesses.includes("Missing context and background information")&&(h+=" Include relevant background context and explain your reasoning."),u&&(h+="\n\nAdvanced requirements:\n• Provide multiple perspectives or approaches\n• Include potential challenges and mitigation strategies\n• Reference current best practices and industry standards"),g=h,b.push("Improved clarity and structure"),b.push("Added context and specific requirements"),f.push("Clear prompts lead to more accurate AI responses"),f.push("Specific examples help AI understand the desired output")),t&&"general"!==t&&t!==s.domain&&(g+="\n\nContext: This should be tailored specifically for ".concat(t," applications and best practices."),b.push("Customized for ".concat(t," domain requirements")),f.push("Domain-specific context ensures relevant and accurate responses")),{optimizedPrompt:g,improvements:b.slice(0,4),expertInsights:f.slice(0,3),reasoning:"Optimized based on ".concat(s.domain," domain analysis with ").concat(s.weaknesses.length," identified improvements and ").concat(s.strengths.length," preserved strengths.")}}(e,i,s,t),l={bestPrompt:n.optimizedPrompt,improvements:n.improvements,qualityMetrics:a,reasoning:n.reasoning,expertInsights:n.expertInsights};return console.log("\uD83D\uDD27 REAL OPTIMIZER: Generated optimization:",n.optimizedPrompt.substring(0,100)+"..."),l}(e,s,i)),l(!1),f("Optimization completed!"),t(!0)},k=async()=>{alert(JSON.stringify({status:"Demo Mode",message:"This is a frontend-only demo deployment. Backend health check requires Convex connection.",available:!1,model:"qwen3:4b"},null,2))};return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,i.jsx)(c,{isOptimizing:n,currentStep:r,totalSteps:h,message:b}),(0,i.jsx)(p,{isVisible:s,onClose:()=>t(!1),results:y}),(0,i.jsx)(u,{error:v,onDismiss:()=>{j(null),l(!1),d(0),f("")}}),(0,i.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,i.jsxs)("header",{className:"text-center mb-12",children:[(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mb-4",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,i.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-4",children:"PromptEvolver"}),(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 max-w-2xl mx-auto",children:[(0,i.jsx)("p",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"\uD83C\uDFAF Demo Mode - Frontend Only"}),(0,i.jsx)("p",{className:"text-sm text-yellow-700",children:"This is a demo deployment showing the UI and simulated functionality • No backend processing"})]}),(0,i.jsx)("p",{className:"text-xl text-gray-600 mb-6 max-w-2xl mx-auto",children:"Advanced Prompt Optimization Demo - UI Preview"}),(0,i.jsx)("div",{className:"flex flex-wrap justify-center gap-4",children:(0,i.jsxs)("button",{onClick:k,className:"inline-flex items-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors shadow-md",children:[(0,i.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"System Health (Demo)"]})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[(0,i.jsx)(o,{onOptimize:w,isOptimizing:n}),(0,i.jsx)("div",{className:"xl:col-span-2",children:(0,i.jsx)(m,{metrics:(null==y?void 0:y.qualityMetrics)||{clarity:8.5,specificity:7.8,engagement:9.2,structure:8,completeness:8.7,errorPrevention:7.5,overall:8.3},overallScore:(null==y||null==(e=y.qualityMetrics)?void 0:e.overall)||8.3})}),(0,i.jsxs)("div",{className:"xl:col-span-1 space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Session Stats"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:x.length}),(0,i.jsx)("div",{className:"text-xs text-gray-600",children:"Demo Sessions"})]}),(0,i.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:x.filter(e=>"completed"===e.status).length}),(0,i.jsx)("div",{className:"text-xs text-gray-600",children:"Completed"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Demo Optimizations"}),(0,i.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,i.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:x.map(e=>{var s,t,a,n;return(0,i.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,i.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,i.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.status]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("svg",{className:"w-4 h-4 text-yellow-400 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.qualityScore.toFixed(1)})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-1",children:"Original:"}),(0,i.jsxs)("p",{className:"text-sm text-gray-700 line-clamp-2",children:[null==(s=e.prompt)?void 0:s.originalPrompt.substring(0,80),((null==(t=e.prompt)?void 0:t.originalPrompt.length)||0)>80&&"..."]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-1",children:"Optimized:"}),(0,i.jsxs)("p",{className:"text-sm text-gray-900 line-clamp-2",children:[null==(a=e.finalResults)?void 0:a.bestPrompt.substring(0,80),(null==(n=e.finalResults)?void 0:n.bestPrompt.length)>80&&"..."]})]})]}),(0,i.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(e.createdAt).toLocaleDateString()]}),(0,i.jsx)("button",{className:"text-blue-600 hover:text-blue-800 font-medium",children:"Demo Data"})]})]},e._id)})})]})]})]}),(0,i.jsx)("footer",{className:"text-center mt-16 pb-8",children:(0,i.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,i.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-6 text-sm text-gray-600",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),(0,i.jsx)("span",{children:"Next.js 15 + React 19"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),(0,i.jsx)("span",{children:"Demo Mode - Frontend Only"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,i.jsx)("span",{children:"126 kB Bundle Size"})]})]}),(0,i.jsx)("div",{className:"mt-4 text-xs text-blue-600 font-medium",children:"\uD83C\uDFAF Frontend demo deployment - Full functionality requires Convex backend"})]})})})]})]})}function g(e){var s;let{isVisible:t,onClose:n}=e,{results:l,currentSession:o,qualityMetrics:c}=r(),[d,m]=(0,a.useState)(!1);return t&&l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Optimization Results"}),(0,i.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,i.jsxs)("div",{className:"p-6 space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==(s=l.qualityMetrics.overall)?void 0:s.toFixed(1))||"N/A"}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Quality Score"})]}),(0,i.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==o?void 0:o.iterationsCompleted)||1}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Iterations"})]}),(0,i.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(((null==o?void 0:o.processingTimeMs)||0)/1e3),"s"]}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Processing Time"})]})]}),l.bestPrompt&&(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold mb-2",children:"Optimized Prompt:"}),(0,i.jsx)("div",{className:"bg-white rounded border p-3 text-sm",children:l.bestPrompt})]}),l.improvements&&l.improvements.length>0&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"font-semibold",children:"Key Improvements:"}),(0,i.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,i.jsx)("div",{className:"space-y-2",children:l.improvements.map((e,s)=>(0,i.jsxs)("div",{className:"text-sm flex items-start",children:[(0,i.jsx)("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),e]},s))})})]}),l.expertInsights&&l.expertInsights.length>0&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"font-semibold",children:"Expert Insights:"}),(0,i.jsx)("div",{className:"bg-indigo-50 rounded-lg p-4",children:(0,i.jsx)("div",{className:"space-y-2",children:l.expertInsights.map((e,s)=>(0,i.jsxs)("div",{className:"text-sm flex items-start",children:[(0,i.jsx)("span",{className:"inline-block w-2 h-2 bg-indigo-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),e]},s))})})]}),(0,i.jsx)("div",{className:"mt-6 pt-6 border-t",children:(0,i.jsx)("button",{onClick:()=>m(!0),className:"w-full px-4 py-3 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors font-medium",children:"\uD83D\uDCAC Share Feedback on This Optimization"})})]})]})}),d&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Feedback Not Available"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Feedback component is not yet implemented in this development demo."}),(0,i.jsx)("button",{onClick:()=>m(!1),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close"})]})})]}):null}function b(){1;return(0,i.jsx)(h,{})}}},e=>{e.O(0,[928,312,441,964,358],()=>e(e.s=4128)),_N_E=e.O()}]);