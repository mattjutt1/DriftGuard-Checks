# Railway Ollama - Direct Execution (No Script)
FROM ollama/ollama:latest

# Install curl for debugging
RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*

# Create models directory
RUN mkdir -p /root/.ollama/models

# Set default environment variables
ENV OLLAMA_MODELS=/root/.ollama/models

# Direct execution without intermediate script
# Railway will inject PORT, we use it via OLLAMA_HOST
ENTRYPOINT ["/bin/sh", "-c", "export OLLAMA_HOST=\"0.0.0.0:${PORT:-11434}\" && echo \"Starting Ollama on $OLLAMA_HOST\" && exec ollama serve"]