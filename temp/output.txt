matt@Matt:~/prompt-wizard$ cd ~/prompt-wizard/apps/driftguard-checks-app
  npm ci
  npm run build
npm error code EUSAGE
npm error
npm error The `npm ci` command can only install with an existing package-lock.json or
npm error npm-shrinkwrap.json with lockfileVersion >= 1. Run an install with npm@5 or
npm error later to generate a package-lock.json file, then try again.
npm error
npm error Clean install a project
npm error
npm error Usage:
npm error npm ci
npm error
npm error Options:
npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
npm error [--no-bin-links] [--no-fund] [--dry-run]
npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
npm error [--workspaces] [--include-workspace-root] [--install-links]
npm error
npm error aliases: clean-install, ic, install-clean, isntall-clean
npm error
npm error Run "npm help ci" for more info
npm error A complete log of this run can be found in: /home/matt/.npm/_logs/2025-08-09T06_15_48_075Z-debug-0.log

> driftguard-checks-app@1.0.0 build
> tsc

src/index.ts:2:1 - error TS6133: 'crypto' is declared but its value is never read.

2 import * as crypto from 'crypto';
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/index.ts:23:19 - error TS2345: Argument of type 'K | undefined' is not assignable to parameter of type 'K'.
  'K' could be instantiated with an arbitrary type which could be unrelated to 'K | undefined'.

23       this.delete(firstKey);
                     ~~~~~~~~

src/index.ts:235:54 - error TS7006: Parameter 'a' implicitly has an 'any' type.

235     const sortedRuns = runs.data.workflow_runs.sort((a, b) =>
                                                         ~

src/index.ts:235:57 - error TS7006: Parameter 'b' implicitly has an 'any' type.

235     const sortedRuns = runs.data.workflow_runs.sort((a, b) =>
                                                            ~

src/index.ts:241:44 - error TS7006: Parameter 'run' implicitly has an 'any' type.

241       const preferredRun = sortedRuns.find(run => run.id.toString() === preferredRunId);
                                               ~~~

src/index.ts:305:34 - error TS6133: 'reject' is declared but its value is never read.

305     return new Promise((resolve, reject) => {
                                     ~~~~~~

src/index.ts:346:22 - error TS2339: Property 'route' does not exist on type 'Probot'.

346   const router = app.route('/health');
                         ~~~~~

src/index.ts:347:26 - error TS6133: 'req' is declared but its value is never read.

347   router.get('/health', (req, res) => {
                             ~~~

src/index.ts:347:26 - error TS7006: Parameter 'req' implicitly has an 'any' type.

347   router.get('/health', (req, res) => {
                             ~~~

src/index.ts:347:31 - error TS7006: Parameter 'res' implicitly has an 'any' type.

347   router.get('/health', (req, res) => {
                                  ~~~

src/index.ts:387:40 - error TS2345: Argument of type '{ id: number; account: { name?: string | null | undefined; email?: string | null | undefined; login: string; id: number; node_id: string; avatar_url: string; gravatar_id: string | null; url: string; ... 13 more ...; user_view_type?: string | undefined; } | { ...; } | null; ... 17 more ...; contact_email?: string | ....' is not assignable to parameter of type 'undefined'.

387     context.log.info('App installed!', context.payload.installation);
                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~


Found 11 errors in the same file, starting at: src/index.ts:2

matt@Matt:~/prompt-wizard/apps/driftguard-checks-app$ cd ~/prompt-wizard/apps/driftguard-checks-app
  npm ci
  npm run build
npm error code EUSAGE
npm error
npm error The `npm ci` command can only install with an existing package-lock.json or
npm error npm-shrinkwrap.json with lockfileVersion >= 1. Run an install with npm@5 or
npm error later to generate a package-lock.json file, then try again.
npm error
npm error Clean install a project
npm error
npm error Usage:
npm error npm ci
npm error
npm error Options:
npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
npm error [--no-bin-links] [--no-fund] [--dry-run]
npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
npm error [--workspaces] [--include-workspace-root] [--install-links]
npm error
npm error aliases: clean-install, ic, install-clean, isntall-clean
npm error
npm error Run "npm help ci" for more info
npm error A complete log of this run can be found in: /home/matt/.npm/_logs/2025-08-09T06_16_05_105Z-debug-0.log

> driftguard-checks-app@1.0.0 build
> tsc

src/index.ts:2:1 - error TS6133: 'crypto' is declared but its value is never read.

2 import * as crypto from 'crypto';
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/index.ts:23:19 - error TS2345: Argument of type 'K | undefined' is not assignable to parameter of type 'K'.
  'K' could be instantiated with an arbitrary type which could be unrelated to 'K | undefined'.

23       this.delete(firstKey);
                     ~~~~~~~~

src/index.ts:235:54 - error TS7006: Parameter 'a' implicitly has an 'any' type.

235     const sortedRuns = runs.data.workflow_runs.sort((a, b) =>
                                                         ~

src/index.ts:235:57 - error TS7006: Parameter 'b' implicitly has an 'any' type.

235     const sortedRuns = runs.data.workflow_runs.sort((a, b) =>
                                                            ~

src/index.ts:241:44 - error TS7006: Parameter 'run' implicitly has an 'any' type.

241       const preferredRun = sortedRuns.find(run => run.id.toString() === preferredRunId);
                                               ~~~

src/index.ts:305:34 - error TS6133: 'reject' is declared but its value is never read.

305     return new Promise((resolve, reject) => {
                                     ~~~~~~

src/index.ts:346:22 - error TS2339: Property 'route' does not exist on type 'Probot'.

346   const router = app.route('/health');
                         ~~~~~

src/index.ts:347:26 - error TS6133: 'req' is declared but its value is never read.

347   router.get('/health', (req, res) => {
                             ~~~

src/index.ts:347:26 - error TS7006: Parameter 'req' implicitly has an 'any' type.

347   router.get('/health', (req, res) => {
                             ~~~

src/index.ts:347:31 - error TS7006: Parameter 'res' implicitly has an 'any' type.

347   router.get('/health', (req, res) => {
                                  ~~~

src/index.ts:387:40 - error TS2345: Argument of type '{ id: number; account: { name?: string | null | undefined; email?: string | null | undefined; login: string; id: number; node_id: string; avatar_url: string; gravatar_id: string | null; url: string; ... 13 more ...; user_view_type?: string | undefined; } | { ...; } | null; ... 17 more ...; contact_email?: string | ....' is not assignable to parameter of type 'undefined'.

387     context.log.info('App installed!', context.payload.installation);
                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~


Found 11 errors in the same file, starting at: src/index.ts:2

matt@Matt:~/prompt-wizard/apps/driftguard-checks-app$ which pm2 >/dev/null || npm i -g pm2

added 136 packages in 4s

13 packages are looking for funding
  run `npm fund` for details
matt@Matt:~/prompt-wizard/apps/driftguard-checks-app$ pkill -f "probot .*driftguard-checks-app" 2>/dev/null || true
  pkill -f "node .*driftguard-checks-app" 2>/dev/null || true
matt@Matt:~/prompt-wizard/apps/driftguard-checks-app$ cd ~/prompt-wizard/apps/driftguard-checks-app
  npm ci
  npm run build
npm error code EUSAGE
npm error
npm error The `npm ci` command can only install with an existing package-lock.json or
npm error npm-shrinkwrap.json with lockfileVersion >= 1. Run an install with npm@5 or
npm error later to generate a package-lock.json file, then try again.
npm error
npm error Clean install a project
npm error
npm error Usage:
npm error npm ci
npm error
npm error Options:
npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
npm error [--no-bin-links] [--no-fund] [--dry-run]
npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
npm error [--workspaces] [--include-workspace-root] [--install-links]
npm error
npm error aliases: clean-install, ic, install-clean, isntall-clean
npm error
npm error Run "npm help ci" for more info
npm error A complete log of this run can be found in: /home/matt/.npm/_logs/2025-08-09T06_16_38_973Z-debug-0.log

> driftguard-checks-app@1.0.0 build
> tsc

src/index.ts:2:1 - error TS6133: 'crypto' is declared but its value is never read.

2 import * as crypto from 'crypto';
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/index.ts:23:19 - error TS2345: Argument of type 'K | undefined' is not assignable to parameter of type 'K'.
  'K' could be instantiated with an arbitrary type which could be unrelated to 'K | undefined'.

23       this.delete(firstKey);
                     ~~~~~~~~

src/index.ts:235:54 - error TS7006: Parameter 'a' implicitly has an 'any' type.

235     const sortedRuns = runs.data.workflow_runs.sort((a, b) =>
                                                         ~

src/index.ts:235:57 - error TS7006: Parameter 'b' implicitly has an 'any' type.

235     const sortedRuns = runs.data.workflow_runs.sort((a, b) =>
                                                            ~

src/index.ts:241:44 - error TS7006: Parameter 'run' implicitly has an 'any' type.

241       const preferredRun = sortedRuns.find(run => run.id.toString() === preferredRunId);
                                               ~~~

src/index.ts:305:34 - error TS6133: 'reject' is declared but its value is never read.

305     return new Promise((resolve, reject) => {
                                     ~~~~~~

src/index.ts:346:22 - error TS2339: Property 'route' does not exist on type 'Probot'.

346   const router = app.route('/health');
                         ~~~~~

src/index.ts:347:26 - error TS6133: 'req' is declared but its value is never read.

347   router.get('/health', (req, res) => {
                             ~~~

src/index.ts:347:26 - error TS7006: Parameter 'req' implicitly has an 'any' type.

347   router.get('/health', (req, res) => {
                             ~~~

src/index.ts:347:31 - error TS7006: Parameter 'res' implicitly has an 'any' type.

347   router.get('/health', (req, res) => {
                                  ~~~

src/index.ts:387:40 - error TS2345: Argument of type '{ id: number; account: { name?: string | null | undefined; email?: string | null | undefined; login: string; id: number; node_id: string; avatar_url: string; gravatar_id: string | null; url: string; ... 13 more ...; user_view_type?: string | undefined; } | { ...; } | null; ... 17 more ...; contact_email?: string | ....' is not assignable to parameter of type 'undefined'.

387     context.log.info('App installed!', context.payload.installation);
                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~


Found 11 errors in the same file, starting at: src/index.ts:2

matt@Matt:~/prompt-wizard/apps/driftguard-checks-app$ ^C
matt@Matt:~/prompt-wizard/apps/driftguard-checks-app$ for PR in 12 13; do
    for i in {1..12}; do
      state=$(gh pr checks $PR --json status -q .status || echo "")
      [[ "$state" == "COMPLETED" ]] && break
      sleep 5
    done
  done
Unknown JSON field: "status"
Available fields:
  bucket
  completedAt
  description
  event
  link
  name
  startedAt
  state
  workflow
Unknown JSON field: "status"
Available fields:
  bucket
  completedAt
  description
  event
  link
  name
  startedAt
  state
  workflow
Unknown JSON field: "status"
Available fields:
  bucket
  completedAt
  description
  event
  link
  name
  startedAt
  state
  workflow
for PR in 12 13; do
    for i in {1..12}; do
      state=$(gh pr checks $PR --json status -q .status || echo "")
      [[ "$state" == "COMPLETED" ]] && break
      sleep 5
    done
  doneUnknown JSON field: "status"
Available fields:
  bucket
  completedAt
  description
  event
  link
  name
  startedAt
  state
  workflow
Unknown JSON field: "status"
Available fields:
  bucket
  completedAt
  description
  event
  link
  name
  startedAt
  state
  workflow

^C
